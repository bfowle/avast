<html>
<head>
<title></title>
</head>
<body>
  <div id="ws"></div>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script type="text/javascript">
    $(function () {
      var ws;
      if (window.WebSocket === undefined) {
        $("#ws").append("Your browser does not support WebSockets");
        return;
      } else {
        ws = initWS();
      }

      function initWS() {
        var socket = new WebSocket("ws://localhost:8080/ws"),
          container = $("#ws");

        socket.onopen = function() {
          container.append("<p>Socket is open</p>");
        };

        socket.onmessage = function (e) {
          container.append("<p>Message:" + e.data + "</p>");
        }

        socket.onclose = function () {
          container.append("<p>Socket closed</p>");
        }

        return socket;
      }
    });
  </script>
  <script type="text/javascript">
    $.ajax({
      url: '/consul/datacenters'
    })
    .done(function(data) {
      var dc = data;
      dc.forEach(function(d) {
        console.log(' --> DATACENTER: ' + d);
        $.ajax({
          url: '/consul/nodes/' + d
        })
        .done(function(data) {
          //console.log(data);
          var nodes = data;
          nodes.forEach(function(n) {
            console.log(' --> NODE: ' + n.node + ' (' + n.address + ')');
          });
        });
      });
    });

    $.ajax({
      url: '/docker/images',
    })
    .done(function(data) {
      console.log(data);
    });

    //$.ajax({
    //  url: '/info',
    //})
    //.done(function(data) {
    //  console.log(data);
    //});
  </script>
</body>
</html>
